/*!
 * Code View Support for the Viewer - v0.1
 *
 * Copyright (c) 2013 Brad Frost, http://bradfrostweb.com & Dave Olsen, http://dmolsen.com
 * Licensed under the MIT license
 *
 */var codeViewer={codeActive:!1,onReady:function(){$("body").addClass("code-ready");$("#sg-t-code").click(function(e){e.preventDefault();$("#sg-t-annotations").removeClass("active");annotationsViewer.commentsActive=!1;var t=window.location.protocol==="file:"?"*":window.location.protocol+"//"+window.location.host;document.getElementById("sg-viewport").contentWindow.postMessage({commentToggle:"off"},t);annotationsViewer.slideComment(999);$(this).hasClass("active")?codeViewer.closeCode():codeViewer.openCode();codeViewer.codeContainerInit()})},openCode:function(){var e=window.location.protocol==="file:"?"*":window.location.protocol+"//"+window.location.host;codeViewer.codeActive=!0;document.getElementById("sg-viewport").contentWindow.postMessage({codeToggle:"on"},e);$("#sg-t-code").addClass("active")},closeCode:function(){var e=window.location.protocol==="file:"?"*":window.location.protocol+"//"+window.location.host;codeViewer.codeActive=!1;document.getElementById("sg-viewport").contentWindow.postMessage({codeToggle:"off"},e);codeViewer.slideCode($("#sg-code-container").outerHeight());$("#sg-t-code").removeClass("active")},codeContainerInit:function(){document.getElementById("sg-code-container")===null&&$('<div id="sg-code-container" class="sg-view-container"></div>').html('<a href="#" id="sg-code-close-btn" class="sg-view-close-btn">Close</a><div id="sg-code-lineage" style="display: none;"><p>This pattern contains the following patterns: <span id="sg-code-lineage-fill"></span></p></div><div id="sg-code-html"><h2>HTML</h2><pre><code id="sg-code-html-fill" class="language-markup"></code></pre></div><div id="sg-code-css" class="with-css" style="display: none;"><h2>CSS</h2><pre><code id="sg-code-css-fill" class="language-css"></code></pre></div>').appendTo("body").css("bottom",-$(document).outerHeight());$("body").delegate("#sg-code-close-btn","click",function(){codeViewer.closeCode();return!1})},slideCode:function(e){$("#sg-code-container").css("bottom",-e)},updateCode:function(e,t,n){if(e.length!==0){$("#sg-code-lineage").css("display","block");var r="";for(var i=0;i<e.length;i++){r+=i===0?"":", ";r+="<a href='"+e[i].lineagePath+"' data-patternPartial='"+e[i].lineagePattern+"'>"+e[i].lineagePattern+"</a>";i++}$("#sg-code-lineage-fill").html(r);$("#sg-code-lineage-fill a").on("click",function(e){e.preventDefault();document.getElementById("sg-viewport").contentWindow.postMessage({path:urlHandler.getFileName($(this).attr("data-patternpartial"))},urlHandler.targetOrigin)})}$("#sg-code-html-fill").text(t);Prism.highlightElement(document.getElementById("sg-code-html-fill"));if(n.indexOf("{{ patternCSS }}")===-1){$("#sg-code-html").addClass("with-css");$("#sg-code-css").css("display","block");$("#sg-code-css-fill").text(n);Prism.highlightElement(document.getElementById("sg-code-css-fill"))}codeViewer.slideCode(0)},receiveIframeMessage:function(e){if(window.location.protocol!=="file:"&&e.origin!==window.location.protocol+"//"+window.location.host)return;e.data.codeOverlay!==undefined&&(e.data.codeOverlay==="on"?codeViewer.updateCode(e.data.lineage,e.data.html,e.data.css):codeViewer.slideCode($("#sg-code-container").outerHeight()))}};$(document).ready(function(){codeViewer.onReady()});window.addEventListener("message",codeViewer.receiveIframeMessage,!1);$("#sg-viewport").load(function(){if(codeViewer.codeActive){var e=window.location.protocol=="file:"?"*":window.location.protocol+"//"+window.location.host;document.getElementById("sg-viewport").contentWindow.postMessage({codeToggle:"on"},e)}});